<html>
  <head>
    <script
      type="text/javascript"
      lang="javascript"
      src="//cdns.global.gigya.com/JS/gigya.js?apikey=4_P1PsLai8qySAAQGymJ4UuA"
    >
      {
        lang: 'en',
        EuronewsEdition:'en'
      }
    </script>
    <script>
      function GigyaLoadFunctions() {
        /*
          console.log("started gigya -> show screenset");
          screens = [
              'gigya-login-screen',
              'gigya-login-success-screen',
              'gigya-register-screen',
              'gigya-complete-registration-screen',
              'gigya-forgot-password-screen',
              'gigya-forgot-password-success-screen',
              'gigya-reset-password-screen',
              'gigya-reset-password-success-screen',
              'gigya-password-change-required-screen',
              'gigya-verification-pending-screen',
              'gigya-verification-sent-screen',
              'gigya-email-verification-success-screen',
              'gigya-email-verification-error-screen',
              'gigya-change-email-screen',
              'gigya-email-code-verification-screen',
          ];

          for(var i=0; i < screens.length; i++) {
              try {
                  gigya.accounts.showScreenSet({
                      screenSet: 'Default-RegistrationLogin',
                      startScreen: screens[i],
                      containerID: screens[i]+"-block",
                  });
              } catch(e) {
                  console.e(e);
              }
          }
          */
        var params = {
          callback: function (e) {
            console.log("session.verify ", e);
            if (e.errorCode == 0) {
              // a session is open
              gigya.accounts.showScreenSet({
                containerID: "containerlogin",
                screenSet: "Euronews-ProfileUpdate",
                startScreen: "gigya-update-subscription-screen"
              });
            } else {
              // non session
              window.location.href = "/index.html";
            }
          }
        };
        try {
          gigya.accounts.session.verify(params);
        } catch (e) {
          console.e(e);
        }

        gigya.socialize.addEventHandlers({
          onLogin: function () {
            alert("user logged successfull");
          }
        });
      }

      function onGigyaServiceReady() {
        GigyaLoadFunctions();
      }

      function onLogout(response) {
        if (response.errorCode == 0) {
          alert("You are now logged out");
          window.location.href = "/index.html";
        } else {
          alert("Error :" + response.errorMessage);
        }
      }
    </script>
    <!-- 
        Example Override style for local dev
        Must integrate on screenset css section after.
    -->
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <div class="header">
      <img src="/img/logo.png">
      </div>
    <div>
      <a href="account.html">Personal informations</a>
      <a href="newsletters.html">Newsletters</a>
      <a href="#" onclick="gigya.accounts.logout({callback:onLogout});"
        >Logout</a
      >
    </div>
    <div class="block-content">
      <div id="containerlogin"></div>
    </div>
  </body>
</html>
